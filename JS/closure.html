<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <script>
        //외부 함수
        // function outter(){

        //     //내부함수
        //     // var inner = function(){....}
        //     function inner(){
        //         var title = 'good day'
        //         alert(title)
        //     }

        //     inner();

        // }

        // outter();



        //클로저 : 내부함수가 생성될 당시의 외부변수를 기억
        //외부 함수
        // function outter(){

        //     //외부 지역변수
        //     var title = 'good day'
        
        //     function inner(){
        //         //내부 함수에서 외부함수의 지역변수에 접근 가능
        //         alert(title) // 
        //     }

        //     inner();

        // }

        // outter();


        //클로저
        //함수가 자신이 생성된 범위 외부에서도 해당 함수의 변수에 접근
        // function outter(){

        //     //외부 지역 변수
        //     var title = 'good day'

        //         //익명함수 반환
        //         return function(){
        //             alert(title); // 외부함수의 지역변수에 접근가능
        //         }

        //     }
        
        // //outter() -> 익명함수가 inner에 할당
        // var inner = outter();
        // //outter 함수의 지역 변수인 title에 접근하여 값을 가져옴
        // inner();



        

        
        //내부 함수가 외부 함수의 변수에 대한 참조를 유지
        // function factory_movie(title){

        //     //title은 factory_movie의 지역 변수 
            
        //     //클로저 생성
        //     // get_title , set_title 을 통해 title 변수에 접근하고 수정가능
        //     // 함수가 자신의 스코프 밖에서 선언된 변수에 접근할 수 있고, 
        //     // 이러한 접근을 통해 변수를 수정할 수 있다는 것을 의미
        //     return{
        //             get_title : function(){
        //                 return title;
        //             },
        //             set_title : function(_title){
        //                 //엄격하게 변수 관리
        //                 if( typeof _title === 'string' ){
        //                     title =   _title
        //                 }else{
        //                     alert('제목은 문자열 이어야 함')
        //                 }
        //             }
        //           }

        // }
        // // debugger
        // //'ghost in the shell'는 factory_movie 의 지역변수로 됨.
        // ghost = factory_movie('ghost in the shell');
        // //get_title() : return title => title은 factory_movie의 지역변수
        // alert(ghost.get_title())

        // // matrix = factory_movie('matrix')

        // // alert(ghost.get_title())
        // // alert(matrix.get_title())

        // //'공각 기동대'는 factory_movie 의 지역변수로 됨.
        // ghost.set_title('공각 기동대')

        // alert(ghost.get_title())
        // // alert(matrix.get_title())







        // 클로저 응용
        // var arr1 = []
        
        // // debugger
        // /*
        //   i=5 일때 for문 종료 -> 익명함수의 i는 현재값 5를 기억
        //   -> 모든 익명함수가 5를 참조
        // */
        // for (var i = 0; i<5; i++){

        //     //arr1 =[ƒ, ƒ, ƒ, ƒ, ƒ] : 모든 함수는 5를 참조
        //     arr1[i] = function(){
        //                     return i //5만 기억..
        //                         }
        // }

        // console.log(arr1);

        // for(var index in  arr1){
        //     console.log(arr1[index]());
        // }

        // var arr2 = []
        // //arr =[0,1,2,3,4]
        // for (var i = 0; i<5; i++){

        //     arr2[i] = 
        //         function(id){  
                
        //         // id 값 유지
        //         // 클로저: 함수가 자신의 스코프 밖에서 선언된 변수(id)에 접근
        //         return function(){ return id } 
                
        //     }(i);
        //     //(i) => (id)
           
        // }
        // console.log(arr2);

        // for(var index in  arr2){
        //     console.log(arr2[index]());
        // }


        
        // //makeAdder가 호출 될때 마다 익명함수를 생성 -> x값기억
        // //
        // function makeAdder(x){

        //     // x : 유지...

        //     return function(y){
        //         return x + y;
        //     }

        // }
        // //add3 <= return function(y){return x + y;}
        // const add3 = makeAdder(3); // x = 3기억
        // console.log(add3(2)); //5

        // const add10 = makeAdder(10); //x = 10기억
        // console.log(add10(5)); //10 + 5 = 15
        // console.log(add3(1)); //3 + 1 = 4
        // // add3, add10은 서로 다른 환경을 가짐 : 서로다른 X값을 유지

        


        function makeCounter(){
            
            //외부 변수를 기억
            let num = 0; // 
            
            return function(){
                //내부 함수가 생성될때
               return num++  // 
            }
        }

        //  counter = function(){num++}
        debugger
        let counter = makeCounter()
        
        console.log(counter());//0
        console.log(counter());//1
        console.log(counter());//2














    </script>

</body>
</html>